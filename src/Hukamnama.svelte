<script>
    import {onMount} from 'svelte';
    import Reader from './Reader.svelte';
    import ReaderChapter from './ReaderChapter.svelte';

    import _ from 'lodash';

    let hukamnama = {};

    onMount(async () => {
        hukamnama = await getHukamnama();
    })
    async function getHukamnama() {
        // Dummy data for testing
        return JSON.parse('{"mukhvaak":{"titles":["iblwvlu mhlw 5 CMq","<> siqgur pRswid ]"],"body":"sKI Awau sKI vis Awau sKI AsI ipr kw mMglu gwvh ] qij mwnu sKI qij mwnu sKI mqu Awpxy pRIqm Bwvh ] qij mwnu mohu ibkwru dUjw syiv eyku inrMjno ] lgu crx srx dieAwl pRIqm sgl durq ibKMfno ] hoie dws dwsI qij audwsI bhuiV ibDI n Dwvw ] nwnku pieAMpY krhu ikrpw qwim mMglu gwvw ]1] AMimRqu ipRA kw nwmu mY AMDuly tohnI ] Eh johY bhu prkwr suMdir mohnI ] mohnI mhw biciqR cMcil Aink Bwv idKwvey ] hoie FIT mITI mnih lwgY nwmu lYx n Awvey ] igRh bnih qIrY brq pUjw bwt GwtY johnI ] nwnku pieAMpY dieAw Dwrhu mY nwmu AMDuly tohnI ]2] moih AnwQ ipRA nwQ ijau jwnhu iqau rKhu ] cqurweI moih nwih rIJwvau kih muKhu ] nh cquir suGir sujwn byqI moih inrguin gunu nhI ] nh rUp DUp n nYx bMky jh BwvY qh rKu quhI ] jY jY jieAMpih sgl jw kau kruxwpiq giq ikin lKhu ] nwnku pieAMpY syv syvku ijau jwnhu iqau moih rKhu ]3] moih mCulI qum nIr quJ ibnu ikau srY ] moih cwiqRk [email&#160;protected] bUMd iqRpqau muiK prY ] muiK prY hrY ipAws myrI jIA hIAw pRwnpqy ] lwfly lwf lfwie sB mih imlu hmwrI hoie gqy ] cIiq icqvau imtu AMDwry ijau Aws ckvI idnu crY ] nwnku pieAMpY ipRA sMig mylI mCulI nIru n vIsrY ]4] Din DMin hmwry Bwg Gir AwieAw ipru myrw ] sohy bMk duAwr sglw bnu hrw ] hr hrw suAwmI suKh gwmI And mMgl rsu Gxw ] nvl nvqn nwhu bwlw kvn rsnw gun Bxw ] myrI syj sohI dyiK mohI sgl shsw duKu hrw ] nwnku pieAMpY myrI Aws pUrI imly suAwmI AprMprw ]5]1]3]"},"punjabiTranslation":{"titles":["iblwvlu mhlw 5 CMq","<> siqgur pRswid ]"],"body":"hy shylIey! AwE (rl ky bYTIey) hy shylIey! AwE pRBU dI rzw ivc qurIey, Aqy pRBU-pqI dI is&iq-swlwh dw gIq gwvIey [ hy shylIey! (Awpxy AMdroN) AhMkwr dUr kr (Awpxy AMdroN) AhMkwr dUr kr, Swied (ies qrHW) AsI Awpxy pRIqm pRBU-pqI ý cMgIAW l`g skIey [ hy shylIey! (Awpxy AMdroN) AhMkwr dUr kr, moh dUr kr, mwieAw dy ipAwr vwlw ivkwr dUr kr, isr& inrlyp pRBU dI srn peI rhu, swry pwpW dy nws krn vwly dieAw dy somy pRIqm pRBU dy crnW dI Et pkVI r`K [ nwnk bynqI krdw hYýhy shylIey! (myry au~qy BI) imhr kr, mYN (pRBU dy) dwsW dI dwsI bx ky (is&iq-swlwh vloN) auprwmqw C`f ky muV hor hor pwsy nwh Btkdw iPrW [ (qUý imhr kryN), qdoN hI mYN (BI) is&iq-swlwh dw gIq gw skWgw [1[hy BweI! prmwqmw dw Awqmk jIvn dyx vwlw nwm myry jIvn vwsqy shwrw hY ijvyN AMnHy ý fMgorI dw shwrw huMdw hY, (ikauNik) auh mn ý Pswx vwlI suMdrI mwieAw keI qrIikAW nwl (jIvW ý) qwVdI rihMdI hY (qy Awpxy moh ivc AMnHw kr lYNdI hY) [ hy BweI! keI rMgW vwlI Aqy mn ý mohx vwlI cMcl mwieAw (jIvW ý) AnykW n^ry ivKWdI rihMdI hY, FIT bx ky (Bwv, muV muV Awpxy hwv-Bwv ivKw ky, Aw^r jIvW dy) mn ivc ipAwrI l`gx l`g pYNdI hY, (ies mohxI mwieAw dy Asr hyT prmwqmw dw) nwm jipAw nhIN jw skdw [ hy BweI! igRhsq ivc (igRhsqIAW ý) jMglW ivc (iqAwgIAW ý), qIrQW dy kMFy (qIrQ-ieSnwnIAW ý), vrq (r`Kx vwilAW ý) dyv-pUjw (krn vwilAW ý), rwhW ivc, p`qxW qy (hr QW ieh mwieAw AwpxI) qwV ivc r`KdI hY [ nwnk bynqI krdw hYý(hy pRBU! myry au~qy) imhr kr (ies mwieAw dI q`k qoN bcx leI) mYý Awpxw nwm (dw shwrw dyeI r`K, ijvyN) AMnHy ý fMgorI dw shwrw huMdw hY [2[hy ipAwry Ksm-pRBU! ijvyN ho sky, (ies mohxI mwieAw dy pMjy qoN) mYý inmwxy ý (bcw ky) r`K [ myry AMdr koeI isAwxp nhIN ik mYN (kuJ) mUMhoN AwK ky qYý pRsMn kr skW [ hy ipAwry nwQ! mYN cqur nhIN, mYN cMgI mwnsk GwVq vwlI nhIN, mYN isAwxI nhIN, mYN cMgI sUJ vwlI nhIN, mYN gux-hIn ivc (koeI BI) gux nhIN [ nwh myrw sohxw rUp hY, nwh (myry AMdr cMgy guxW vwlI) sugMDI hY nwh myry bWky nYx hnýij`Qy qyrI rzw hY auQy hI mYý (ies mohxI mwieAw qoN) bcw lY [ hy qrs dy mwlk pRBU! (qUý AYsw hYN) ijs dI swry jIv jY jYkwr aucwrdy hn [ qUý ikho ijhw hYNýiksy ny BI ieh Byq nhIN smiJAw [ nwnk bynqI krdw hYýhy pRBU! (mYN qyrw) syvk hW (mYý AwpxI) syvw-BgqI (b^S) ijvyN ho sky, iqvyN mYý (ies mohxI mwieAw qoN) bcweI r`K [3[ hy pRBU! mYN m`CI (vwsqy) qUý (qyrw nwm) pwxI hY, qYQoN ibnw (qyrI Xwd qoN ibnw) myrw jIaUx nhIN ho skdw [ hy pRBU! mYN ppIhy (vwsqy) qUý (qyrw nwm) vrKw dI bUMd hY, mYý (qdoN) SWqI AwauNdI hY (jdoN nwm-bUMd myry) mUMh ivc pYNdI hY [ (ijvyN vrKw dI bUMd ppIhy dy mUMh ivc pYNdI hY qW auh bMUd aus dI ipAws dUr kr dyNdI hY, iqvyN jdoN qyrw nwm-bUMd myry) mUMh ivc pYNdI hY qW auh (myry AMdroN mwieAw dI) iqýSnw dUr kr dyNdI hY [ hy myrI ijMd dy mwlk! hy myry ihrdy dy sweIN! hy myry pRwxW dy nwQ! hy ipAwry! ipAwr-Bry kOqk kr ky qUý swrI isRStI ivc (v`s irhw hYN [ hy ipAwry! mYý) iml, (qwik) myrI au~cI Awqmk AvsQw bx sky [ hy pRBU! ijvyN ckvI Aws bxweI r`KdI hY ik idn cVH irhw hY, iqvyN mYN BI (qyrw imlwp hI) icqwrdI rihMdI hW (qy, AwKdI rihMdI hWý) hy hnyry! (mwieAw dy moh dy hnyry! myry AMdroN) dUr ho jw [ nwnk bynqI krdw hYýhy ipAwry (mYý Awpxy) nwl imlw lY, (mYN) m`CI ý (qyrw nwm-) pwxI B`ul nhIN skdw [4[ hy shylIey! (myry ihrdy-) Gr ivc myrw (pRBU) pqI Aw v`isAw hY, myry Bwg jwg pey hn [ (myry ies srIr-Gr dy) drvwzy (swry igAwn-ieMdýy) sohxy bx gey hn (Bwv, hux ieh igAwn-ieMdýy ivkwrW vl iK`c nhIN pWdy, myrw) swrw ihrdy-jUh Awqmk jIvn vwlw ho igAw hY [ hy shylIey! Awqmk jIvn nwl BrpUr Aqy suKW dI dwiq dyx vwlw mwlk-pRBU (myry ihrdy-Gr ivc Aw v`isAw hY, ijs dw sdkw myry AMdr) AwnMd bx gey hn, ^uSIAW ho geIAW hn, bhuq suAwd bx igAw hY [ hy shylIey! myrw Ksm-pRBU hr vyly nvW hY juAwn hY (Bwv, aus dw ipAwr kdy kmzor nhIN pYNdw) [ mYN (AwpxI) jIB nwl (aus dy) ikhVy ikhVy gux d`sW? nwnk bynqI krdw hYý(hy shylIey! Ksm-pRBU dy myry ihrdy ivc Aw v`sx nwl) myrI ihrdw-syj sj geI hY, (aus pRBU-pqI dw) drsn kr ky mYN msq ho rhI hW (aus ny myry AMdroN) hryk sihm qy du`K dUr kr id`qw hY [ mYý byAMq mwlk-pRBU iml ipAw hY, myrI hryk Aws pUrI ho geI hY [5[3["},"englishTranslation":{"titles":["BILAAVAL, FIFTH MEHL, CHHANT:","ONE UNIVERSAL CREATOR GOD. BY THE GRACE OF THE TRUE GURU:"],"body":"Come, O my sisters, come, O my companions, and let us remain under the Lordýs control. Letýs sing the Songs of Bliss of our Husband Lord. Renounce your pride, O my companions, renounce your egotistical pride, O my sisters, so that you may become pleasing to your Beloved. Renounce pride, emotional attachment, corruption and duality, and serve the One Immaculate Lord. Hold tight to the Sanctuary of the Feet of the Merciful Lord, your Beloved, the Destroyer of all sins. Be the slave of His slaves, forsake sorrow and sadness, and do not bother with other devices. Prays Nanak, O Lord, please bless me with Your Mercy, that I may sing Your songs of bliss. || 1 || The Ambrosial Naam, the Name of my Beloved, is like a cane to a blind man. Maya seduces in so many ways, like a beautiful enticing woman. This enticer is so incredibly beautiful and clever; she entices with countless suggestive gestures. Maya is stubborn and persistent; she seems so sweet to the mind, and then he does not chant the Naam. At home, in the forest, on the banks of sacred rivers, fasting, worshipping, on the roads and on the shore, she is spying. Prays Nanak, please bless me with Your Kindness, Lord; I am blind, and Your Name is my cane. || 2 || I am helpless and masterless; You, O my Beloved, are my Lord and Master. As it pleases You, so do You protect me. I have no wisdom or cleverness; what face should I put on to please You? I am not clever, skillful or wise; I am worthless, without any virtue at all. I have no beauty or pleasing smell, no beautiful eyes. As it pleases You, please preserve me, O Lord. His victory is celebrated by all; how can I know the state of the Lord of Mercy? Prays Nanak, I am the servant of Your servants; as it pleases You, please preserve me. || 3 || I am the fish, and You are the water; without You, what can I do? I am the sparrow-hawk, and You are the rain-drop; when it falls into my mouth, I am satisfied. When it falls into my mouth, my thirst is quenched; You are the Lord of my soul, my heart, my breath of life. Touch me, and caress me, O Lord, You are in all; let me meet You, so that I may be emancipated. In my consciousness I remember You, and the darkness is dispelled, like the chakvi duck, which longs to see the dawn. Prays Nanak, O my Beloved, please unite me with Yourself; the fish never forgets the water. || 4 || Blessed, blessed is my destiny; my Husband Lord has come into my home. The gate of my mansion is so beautiful, and all my gardens are so green and alive. My peace-giving Lord and Master has rejuvenated me, and blessed me with great joy, bliss and love. My Young Husband Lord is eternally young, and His body is forever youthful; what tongue can I use to chant His Glorious Praises? My bed is beautiful; gazing upon Him, I am fascinated, and all my doubts and pains are dispelled. Prays Nanak, my hopes are fulfilled; my Lord and Master is unlimited. || 5 || 1 || 3 ||"},"date":{"punjabi":"AYqvwr, 19 A`sU (sMmq 552 nwnkSwhI)","english":"Sunday, 19th Assu (Samvat 552 Nanakshahi)"},"pageNumber":847}');
        // TODO get it from `/api/hukamnama`
    }
</script>

<style>

</style>

{#if !_.isEmpty(hukamnama)}
    <Reader>
        <ReaderChapter>
            {#each hukamnama.mukhvaak.titles as title}
                <span class="centered">{title}</span>
            {/each}
            <span class="justified">{hukamnama.mukhvaak.body}</span>
        </ReaderChapter>
        <ReaderChapter>
            {#each hukamnama.punjabiTranslation.titles as title}
                <span class="centered">{title}</span>
            {/each}
            <span class="justified">{hukamnama.punjabiTranslation.body}</span>
        </ReaderChapter>
        <ReaderChapter>
            {#each hukamnama.englishTranslation.titles as title}
                <span class="centered">{title}</span>
            {/each}
            <span class="justified">{hukamnama.englishTranslation.body}</span>
        </ReaderChapter>
    </Reader>
{/if}